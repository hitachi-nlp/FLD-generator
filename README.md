# FLD Generator
This is one of the official repositories of the paper [Learning Deductive Reasoning from Synthetic Corpus based on Formal Logic](TODO).
This repository includes the code for generating the FLD corpus.  

See [the entry-point repository](https://github.com/hitachi-nlp/FLD) for the other repositories used in the paper.

## About this release
* This is version 2.0 of FLD corpus generator with improved natural language template quality, logical proof consistency, and harder distractors. This version generates corpora slightly different from those generated by version 1.0 used in the paper.
* See [FLD-corpus](https://github.com/hitachi-nlp/FLD-corpus) for the released corpora and the prover performance.

## Installation
The code has been tested on Python 3.7.7.
```console
$ pip install -r ./requrements.txt
```

## How to generate FLD corpus
Use `./create_corpus.py`, which generates a corpus with the design specified by the options values.

We can create FLD.3 (**FLD**) by running the follows command:
```console
$ python ./create_corpus.py\
    <output_dir>\
    <dataset_size>\
    --depth-range '[1, 3]'\
    --depth-distrib flat.no_reference\
    --branch-extensions-range '[0, 5]'\
    --argument-config ./configs/arguments/axioms/\
    --complex-formula-arguments-weight 0.5\
    --quantifier-axiom-arguments-weight 0.2\
    --quantifier-axiom universal_quantifier_elim\
    --quantifier-axiom universal_quantifier_intro\
    --quantifier-axiom existential_quantifier_intro\
    --quantifier-axiom existential_quantifier_elim\
    --translation-config ./configs/translations/thing.v1/\
    --distractor "fallback(mixture(negative_tree_double).simplified_formula.various_form)"\
    --distractors-range '[15, 20]'\
    --translation-distractors-range '[0, 0]'\
    --unknown-ratio 0.33\
    --num-workers 5\
    --seed 0
```

We can create FLD.4 (**FLDâ˜…**) by running the follows command:
```console
$ python ./create_corpus.py\
    <output_dir>\
    <dataset_size>\
    --depth-range '[1, 8]'\
    --depth-distrib flat.no_reference\
    --branch-extensions-range '[0, 5]'\
    --argument-config ./configs/arguments/axioms/\
    --complex-formula-arguments-weight 0.5\
    --quantifier-axiom-arguments-weight 0.2\
    --quantifier-axiom universal_quantifier_elim\
    --quantifier-axiom universal_quantifier_intro\
    --quantifier-axiom existential_quantifier_intro\
    --quantifier-axiom existential_quantifier_elim\
    --translation-config ./configs/translations/thing.v1/\
    --distractor "fallback(mixture(negative_tree_double).simplified_formula.various_form)"\
    --distractors-range '[15, 20]'\
    --translation-distractors-range '[0, 0]'\
    --unknown-ratio 0.33\
    --num-workers 5\
    --seed 0
```

## Citation
```bibtex
@inproceedings{morishita2023FLD,
  title={Learning Deductive Reasoning from Synthetic Corpus based on Formal Logic},
  author={Morishita, Terufumi and Morio, Gaku and Yamaguchi, Atsuki and Sogawa, Yasuhiro},
  booktitle={International Conference on Machine Learning},
  year={2023},
  organization={PMLR}
}
```
